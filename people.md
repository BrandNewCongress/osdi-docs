# Person
## Attributes

| Name          | Type      | Description
|-----------    |-----------|--------------
|last_name      |string     |Last name
|first_name     |string     |First name
|middle_name	|string     |Middle name
|prefix			| string	|Prefix like "Dr", "Mr" etc. Free-form field
|suffix			| string	|Suffix like "Jr.", "Ph.D" Free-form field
|gender			|string		|The gender binary with which a person most closely identifies, or "Other" if the person identifies with neither. One of "Female", "Male", "Other".
|gender_identity|string     |The self-described gender with which a person identifies. Free-form field. While this field is free-form, data should still follow standardized forms whenever possible (i.e. use "Female" and not "female" or "F"). _Examples: If a person self-identifies as "Female", both_ `gender` _and_ `gender_identity` _fields should have a value of "Female". If a person self-identifies as "Transgender Female",_ `gender` _should have a value of "Female" and_ `gender_identity` _should have a value of "Transgender Female"._
|identifier     |string     |The provider's current canonical identifier for a person. Identifier should comply with the format `osdi:person:<uuid4>`, where `<uuid4>` is an RFC 4122 Version 4 UUID.
|party          |string     |Party affiliation "democrat", "republican", "independent", "none"
|primary_address|Address    |A single instance of an address reflecting the person's primary address
|primary_phone  |string     |The person's primary phone number
|primary_email  |string     |A person's primary email address
|source         |string     |Information about the source where this person record was acquired.  Eg "Ref74"

## Collections
| Name          | Type      | Description
|-----------    |-----------|--------------
|identifiers    |identifiers[]| A collection of identifiers the provider has determined to be associated with the person
|addresses      |Address[]  |A collection of addresses associated with the person
|emails         |Email[]    |A collection of email addresses associated with the person
|phones         |Phone[]
|donations      |Donation[] |A collection of donations associated with the person
|question_answers|QuestionAnswer[]|A collection of answers to questions from surveys
|event_attendance |Attendance[]|A collection of attendance records for a person
|interactions   |Interaction[]|A collection of outreach interactions for a person, eg Volunteer Joe called voter Sam F. Bar

# Identifier

- Identifiers are practically unique identifiers which may be generated by any OSDI entity to refer to an actual person.
- A single identifier may be used by multiple OSDI entities as their canonical identifier for referring to an actual person. In fact, it is encouraged that multiple entities use the same canonical identifier to refer to the same person whenever it's practicable and there's significant confidence that those OSDI entities are referring to the same actual person.
- Identifiers are __not__ associated with a particular representation of a person record. When a person record is updated with new or revised information, the identifier must not change.
- Previously used canonical identifiers are retained in the `identifiers` collection to make it easier for consumers of multiple OSDI data sources to merge records and for collaborating OSDI data providers to synchronize their data.
- The `identifiers` collection does not prescribe how an OSDI consumer should utilize the collection for merging or updating their own person records. It's only purpose is to communicate that the real person has previously been referred to by those identifiers and that the OSDI provider believes those identifiers to all be associated with the same real person.
- Consumers of OSDI APIs should be able to request a person record by any `identifier` contained in the `identifiers` collection. While it is preferred that a person record is requested using their canonical `identifier`, some consumers may have old representations of a person record and will not be using the current canonical identifier.

## Merging Records

Determining how, when, and whether two person records should be merged, and then determining which record is more authoritative for each data element of a record is a very difficult task. Automating that process is highly error prone and defining a standard process for merging records goes beyond the scope of OSDI's charter. OSDI is only responsible for establishing a standard for how OSDI entities communicate with each other that they have merged records by whatever internal processes they have defined.

### Example #1

Voter Labs is a data provider who provides OSDI-formatted data. Voter Labs identifies a new supporter. They create a new person record for this supporter and assign them a new identifier:

	{
		"identifier": "osdi:person:12bd9f4e-cc98-44aa-b741-fe52dc2af93d"
		"first_name": "Edwin",
		"last_name": "Labadie"
		"email": "edwin.labadie@example.com"
		"_embedded": {
			"identifiers": [
				"osdi:person:12bd9f4e-cc98-44aa-b741-fe52dc2af93d"
			]
		}
	}

Voter Labs also has an existing record in their database that looks like this:

	{
		"identifier": "osdi:person:e2cdf524-15fc-48b4-8261-b905e91de954"
		"first_name": "Edwin",
		"last_name": "Labadie"
		"middle_name": "Marques"
		"email": "edwin@example-old.com",
		"_embedded": {
			"identifiers": [
				"osdi:person:e2cdf524-15fc-48b4-8261-b905e91de954"
			]
		}
	}

Through some internally-defined process, Voter Labs decides the two records represent the same person and should be merged. Also through some internally-defined process, they determine which record should be trusted for which fields and determine which record's identifier is the new canonical identifier. The resulting merged record would look like this:

	{
		"identifier": "osdi:person:e2cdf524-15fc-48b4-8261-b905e91de954"
		"first_name": "Edwin",
		"last_name": "Labadie"
		"middle_name": "Marques"
		"email": "edwin.labadie@example.com",
		"_embedded": {
			"identifiers": [
				"osdi:person:e2cdf524-15fc-48b4-8261-b905e91de954",
				"osdi:person:12bd9f4e-cc98-44aa-b741-fe52dc2af93d"
			]
		}
	}

What this new record means is that `osdi:person:e2cdf524-15fc-48b4-8261-b905e91de954` is the new id by which Voter Labs refers to this real person and that `osdi:person:12bd9f4e-cc98-44aa-b741-fe52dc2af93d` is another id by which this real person has previously been referred to.

Consumers of Voter Labs' API __may__ choose to use that information to update their own local representation of the record which refers to the real person Edwin Labadie. They __may__ also choose to update their own local representation of Edwin Labadie to include identifiers provided by other OSDI providers which they believe also refer to the real person Edwin Labadie.


# Address
## Attributes

| Name          | Type      | Description
|----------------|-----------|----------------
| primary		| boolean	|Denotes if this is the primary address.  A person can have only one primary address
|address_type   |string     |Type of address "Home","Work",'Mailing'
|address1       |string     |Address line 1
|address2       |string     |Address line 2
|addressN       |string     |Additional address lines
|city           |string     |City
|state          |string     |State abbreviation according to ISO 3166-2 (Final 2 alpha digits)
|postal_code    |string     |Region specific postal code
|country_code	|string		|Country code according to ISO 3166-1 Alpha-2
|lat			|float		|Geolocation latitude
|lng			|float		|Geolocation longitude
|accuracy		|string		|One of "Rooftop", "Approximate"
|address_status	|string		|One of "Potential", "Verified", "Bad".

### State and Country codes
Country Codes should conform to [ISO 3166-1 Alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)

Examples:

|Country		|Code
|---------------|----------------------
|United States	|US
|Canada			|CA
|Cyprus			|CY

In the United States, state abbreviations should conform to [ISO 3166-2:US](http://en.wikipedia.org/wiki/ISO_3166-2:US) but using only the final two alphanumeric characters

Examples:

|State			|Code
|---------------|----------------------
|New Jersey		|NJ
|California		|CA
|New York		|NY
|Washington		|WA



## Links
| Name          | Type      | Description
|-----------    |-----------|--------------
|person      |Person*       |A link to the person associated with the address

# Scenarios
## Get a list of people with pagination

    GET /api/v1/people?per_page=2&page=1

    200 OK
    Content-Type: application/json

    {
      "total_pages": 1,
      "page": 1,
      "total_records": 2,
      "_embedded": {
        "people": [
          {
            "first_name": "Edwin",
            "last_name": "Labadie",
            "middle_name": "Marques",
            "email": "test-3@example.com",
            "gender": "Male",
            "gender_identity": "Male",
            "party": "Democrat",
            "source": "sed",
            "source_details": "Delectus rerum autem mollitia sit asperiores odit hic cum.",
            "twitter_handle": "@Edwin_Labadie",
            "guid": "c1d9c510-b562-0130-dc7c-168c51e904de",
            "_embedded": {
              "primary_address": {
                "address1": "935 Ed Lock",
                "city": "New Dudley",
                "state": "MN",
                "postal_code": "17678",
                "country_code": "RU",
                "address_type": "Home",
                "lat": 44,
                "lng": 40,
                "accuracy": "Rooftop",
                "address_status": "Verified",
                "primary": true,
                "_links": {
                  "self": {
                    "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/46"
                  },
                  "person": {
                    "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23"
                  }
                }
              },
              "addresses": [
                {
                  "address1": "28160 Wiegand Divide",
                  "city": "Lake Amarimouth",
                  "state": "GA",
                  "postal_code": "27585-7257",
                  "country_code": "US",
                  "address_type": "Work",
                  "lat": 44,
                  "lng": 40,
                  "accuracy": "Rooftop",
                  "address_status": "Verified",
                  "primary": false,
                  "_links": {
                    "self": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/45"
                    },
                    "person": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23"
                    }
                  }
                },
                {
                  "address1": "935 Ed Lock",
                  "city": "New Dudley",
                  "state": "MN",
                  "postal_code": "17678",
                  "country_code": "RU",
                  "address_type": "Home",
                  "lat": 44,
                  "lng": 40,
                  "accuracy": "Rooftop",
                  "address_status": "Verified",
                  "primary": true,
                  "_links": {
                    "self": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/46"
                    },
                    "person": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23"
                    }
                  }
                }
              ]
            },
            "_links": {
              "addresses": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23/addresses"
              },
              "question_answers": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23/question_answers"
              },
              "self": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/23"
              }
            }
          },
          {
            "first_name": "Parker",
            "last_name": "Walker",
            "middle_name": "Jannie",
            "email": "test-4@example.com",
            "gender": "Male",
            "gender_identity": "Male",
            "party": "Democrat",
            "source": "architecto",
            "source_details": "Itaque et reprehenderit rerum ea quis.",
            "twitter_handle": "@Parker_Walker",
            "guid": "c1e1d0d0-b562-0130-dc7c-168c51e904de",
            "_embedded": {
              "primary_address": {
                "address1": "22184 Vernie Cove",
                "city": "Rowemouth",
                "state": "GA",
                "postal_code": "74895",
                "country_code": "JP",
                "address_type": "Home",
                "lat": 44,
                "lng": 40,
                "accuracy": "Rooftop",
                "address_status": "Verified",
                "primary": true,
                "_links": {
                  "self": {
                    "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/48"
                  },
                  "person": {
                    "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24"
                  }
                }
              },
              "addresses": [
                {
                  "address1": "7485 Rashad Pine",
                  "city": "Brandynview",
                  "state": "PR",
                  "postal_code": "76221-3163",
                  "country_code": "US",
                  "address_type": "Work",
                  "lat": 44,
                  "lng": 40,
                  "accuracy": "Rooftop",
                  "address_status": "Verified",
                  "primary": false,
                  "_links": {
                    "self": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/47"
                    },
                    "person": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24"
                    }
                  }
                },
                {
                  "address1": "22184 Vernie Cove",
                  "city": "Rowemouth",
                  "state": "GA",
                  "postal_code": "74895",
                  "country_code": "JP",
                  "address_type": "Home",
                  "lat": 44,
                  "lng": 40,
                  "accuracy": "Rooftop",
                  "address_status": "Verified",
                  "primary": true,
                  "_links": {
                    "self": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses/48"
                    },
                    "person": {
                      "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24"
                    }
                  }
                }
              ]
            },
            "_links": {
              "addresses": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24/addresses"
              },
              "question_answers": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24/question_answers"
              },
              "self": {
                "href": "http://osdi-prototype.herokuapp.com/api/v1/people/24"
              }
            }
          }
        ]
      },
      "_links": {
        "self": {
          "href": "http://osdi-prototype.herokuapp.com/api/v1/people"
        },
        "addresses": {
          "href": "http://osdi-prototype.herokuapp.com/api/v1/addresses"
        }
      }
    }